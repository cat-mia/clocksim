## clocksim

实验原理：

一种非集中式物理时钟同步算法。

算法的基本思想:将时间划分成固定长度的再同步间隔。*i*th 间隔从T0+*i*R时刻开始到T0+(*i*+1)R时刻结束,其中,T0是过去认可的一个时刻,R是一个系统参数。在每一个间隔的开始,每一个机器都广播自己时钟当前的时间值。由于不同机器上时钟的速度不相同,所以,这些广播不会恰好同时进行。每一个机器广播自己的时间后,它就启动自己的定时器来收集在第*i*th间隔内其它机器发来的时间值。当所有机器含有时间值的广播到达后,它计算所有时间值的平均值并将自己时钟调整到这个平均值。

一种改进的方法：先去掉m个最大值和m个最小值。然后,在计算所剩时间值的平均值。其目的是为了消除某些机器时钟的损坏所造成的时钟值过大和过小的异常情况，提高时间值的正确性。该算法还可以考虑每一个广播消息的延迟。消息延迟可以通过已知网络拓扑或者探察消息返回的时间来获得。